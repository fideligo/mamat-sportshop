{% extends 'base.html' %} {% load static %} {% block content %}
<!-- Navbar -->
{% include 'navbar.html' %}

<!-- Hero Section -->
<section
	class="relative h-screen bg-cover bg-center"
	style="background-image: url('{% static 'image/main.png' %}')"
>
	<div class="absolute inset-0 bg-black bg-opacity-40"></div>
	<div class="relative z-10 flex items-center h-full px-6 md:px-16">
		<div class="max-w-xl text-left">
			<h1 class="text-5xl md:text-6xl font-bold leading-tight text-white">
				Kick off with <br />
				the <span class="text-sky-400">best</span><br />
				<span class="text-sky-400">football gear.</span>
			</h1>
			<p class="mt-4 text-lg text-gray-200">
				Experience the game like never before.
			</p>
			<a
				href="#all_products"
				class="mt-6 inline-block bg-black text-white px-6 py-3 rounded-md font-medium shadow-lg hover:bg-gray-800 transition"
			>
				Shopping Now
			</a>
		</div>
	</div>
</section>

<!-- Featured Products (only if not empty) -->
{% if featured_list %}
<section id="featured_products" class="container mx-auto px-6 py-12">
	<h2 class="text-2xl font-bold mb-6 text-black">Featured Products</h2>

	<!-- Horizontal Scroll Wrapper -->
	<div
		class="flex gap-6 overflow-x-auto no-scrollbar scroll-smooth snap-x snap-mandatory pb-4"
	>
		{% for product in featured_list %}
			<div class="flex-shrink-0 w-64 snap-start">
				{% include "product_card.html" with product=product %}
			</div>
		{% endfor %}
	</div>
</section>
{% endif %}

<!-- All / My Products -->
<div id="all_products" class="container mx-auto px-6 py-12 bg-white text-black">
	<div class="flex justify-between items-center mb-6">
		<h2 class="text-2xl font-bold">All Products</h2>

		<!-- Create Button -->
		<button
			id="btn-open-create"
			class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition"
		>
			+ Add Product
		</button>
	</div>

	<!-- Filter Buttons -->
	<div class="flex gap-4 mb-6">
		<button
			id="filter-all"
			class="bg-gray-200 hover:bg-gray-300 text-black px-4 py-2 rounded"
		>
			All Products
		</button>
		<button
			id="filter-my"
			class="bg-gray-200 hover:bg-gray-300 text-black px-4 py-2 rounded"
		>
			My Products
		</button>
	</div>

	<!-- Refresh Button -->
	<div class="flex justify-end mb-4">
		<button
			id="refresh-products"
			class="bg-[#212A31] hover:bg-[#34424B] text-white font-medium px-4 py-2 rounded-md transition"
		>
			â†» Refresh Products
		</button>
	</div>

	<!-- State Containers -->
	<div id="loading" class="hidden text-center py-20">
		<p class="text-gray-600 text-lg animate-pulse">Loading products...</p>
	</div>

	<div id="error" class="hidden text-center py-20">
		<p class="text-red-600 font-medium">Failed to load products.</p>
	</div>

	<div id="empty" class="hidden text-center py-20">
		<p class="text-gray-500 text-lg">No products found.</p>
	</div>

	<!-- Product Grid (Dynamic via AJAX) -->
	<div
		id="grid"
		class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6"
	></div>
</div>

<!-- ======================== -->
<!-- ðŸš€ JavaScript Injection -->
<!-- ======================== -->

<!-- Config: pass Django variables to JS -->
<script>
	const CURRENT_USER_ID = "{{ request.user.id|default:'' }}";
	const PRODUCT_JSON_URL = "{% url 'main:show_json' %}";
	const ADD_PRODUCT_URL = "{% url 'main:add_product' %}";
</script>

<!-- Load JS at the very end -->
<script src="{% static 'js/utils.js' %}"></script>
<script src="{% static 'js/products_ajax.js' %}"></script>
<script src="{% static 'js/modal_actions.js' %}"></script>

{% endblock content %}
